<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Flipbook</title>

<!-- مكتبة Flipbook -->
<link rel="stylesheet" href="https://unpkg.com/page-flip/dist/css/page-flip.css">
<script src="https://unpkg.com/page-flip/dist/js/page-flip.browser.js"></script>

<style>
  body{
    background:#f3f3f3;
    margin:0;
    font-family: "Segoe UI", Tahoma, Arial, "Noto Naskh Arabic", sans-serif;
  }

  #book{
    width:100%;
    max-width:900px;
    height:600px;
    margin:40px auto;
    background:#fff;
    border-radius:8px;
    box-shadow:0 4px 15px rgba(0,0,0,0.1);
  }

  /* فهرس */
  .toc{
    position:fixed;
    top:90px;
    right:10px;
    width:150px;
    max-height:80vh;
    overflow:auto;
    background:#fff;
    padding:10px;
    border-radius:8px;
    box-shadow:0 6px 15px rgba(0,0,0,0.1);
  }
  .toc h3{
    margin:0 0 10px;
    font-size:1rem;
    text-align:center;
  }
  .toc .item{
    padding:8px;
    margin-bottom:8px;
    background:#f7f7f7;
    border-radius:6px;
    cursor:pointer;
    transition:0.2s;
  }
  .toc .item:hover{
    background:#eaeaea;
  }
</style>
</head>

<body>

<h2 style="text-align:center;margin-top:20px;">كتابي القابل للتقليب</h2>

<!-- فهرس -->
<div class="toc">
  <h3>الفهرس</h3>
  <div class="item" onclick="goToPage(0)">مصر – الصفحة 1</div>
  <div class="item" onclick="goToPage(1)">مصر – الصفحة 2</div>
  <div class="item" onclick="goToPage(2)">العراق – الصفحة 3</div>
  <div class="item" onclick="goToPage(3)">العراق – الصفحة 4</div>
</div>

<div id="book"></div>

<script>
(function(){

  /* صفحات الكتاب */
  let images = [
    "pages/1.jpg",  // مصر
    "pages/2.jpg",  // مصر
    "pages/3.jpg",  // العراق
    "pages/4.jpg"   // العراق
  ];

  /* عكس الترتيب ليظهر الغلاف على اليمين */
  images = images.reverse();

  const bookEl = document.getElementById("book");

  function getOptions(){
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth);
    const width = Math.min(900, Math.floor(vw * 0.9));
    return {
      width: width,
      height: Math.floor(width * 1.35),
      showCover:true,
      rtl:true
    };
  }

  function initFlip(){
    const PageFlipClass = window.PageFlip;
    const flip = new PageFlipClass(bookEl, getOptions());
    flip.loadFromImages(images);
    window._flip = flip; // نخزنها للوصول عبر goToPage
  }

  /* الانتقال للصفحة */
  window.goToPage = function(i){
    if(window._flip){
      // لأننا عكسنا المصفوفة
      const realIndex = images.length - 1 - i;
      window._flip.flip(realIndex);
    }
  };

  initFlip();

})();
</script>

</body>
</html>
